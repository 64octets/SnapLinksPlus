{"version":3,"sources":["SnapLinks.es6"],"names":[],"mappings":"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","file":"SnapLinks-compiled.js","sourcesContent":["/*\n * Copyright (c) 2016 Clint Priest\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\n * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\n * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n\"use strict\";\n\nconst CTRL  = 1,\n\t  ALT   = 2,\n\t  SHIFT = 4;\n\n//  (MouseEvent.buttons bitfield)\nconst LMB = 1,\t// Left Mouse Button\n\t  RMB = 2,\t// Right Mouse Button\n\t  MMB = 4;\t// Middle Mouse Button\n\n\nconst data = {\n\tscrollRate: 8,\n\tselection : {\n\t\tactivate: {\n\t\t\tminX: 5,\n\t\t\tminY: 5,\n\t\t}\n\t}\n};\n\nclass Rect {\n\tconstructor(top, left, bottom, right) {\n\t\t[ this.originTop, this.originLeft ]              = [ top, left ];\n\t\t[ this.top, this.left, this.bottom, this.right ] = [ top, left, bottom, right ];\n\t\tthis.calculateProperties();\n\t}\n\n\tsetBottomRight(bottom, right) {\n\t\t[ this.top, this.left ]     = [ Math.min(this.originTop, bottom), Math.min(this.originLeft, right) ];\n\t\t[ this.bottom, this.right ] = [ Math.max(this.originTop, bottom), Math.max(this.originLeft, right) ];\n\t\treturn this.calculateProperties();\n\t}\n\n\tcalculateProperties() {\n\t\tthis.width  = this.right - this.left;\n\t\tthis.height = this.bottom - this.top;\n\t\treturn this;\n\t}\n\n\texpand(x, y) {\n\t\t[ this.top, this.bottom ] = [ this.top - y, this.bottom + y ];\n\t\t[ this.left, this.right ] = [ this.left - x, this.right + x ];\n\t\treturn this.calculateProperties();\n\t}\n\n\tclipTo(r) {\n\t\t[ this.top, this.left ]     = [ Math.max(this.top, r.top), Math.max(this.left, r.left) ];\n\t\t[ this.bottom, this.right ] = [ Math.min(this.bottom, r.bottom), Math.min(this.right, r.right) ];\n\t\treturn this.calculateProperties();\n\t}\n\n\ttoString() { return `{ top: ${this.top}, left: ${this.left}, bottom: ${this.bottom}, right: ${this.right}, width: ${this.width}, height: ${this.height} }`; }\n}\n\nclass DocRect extends Rect {\n\tconstructor(doc) {\n\t\tlet docElem = document.documentElement;\n\t\tsuper(0, 0, docElem.offsetHeight, docElem.offsetWidth);\n\t}\n}\n\nclass SelectionRect {\n\tconstructor(top, left) {\n\t\tthis.uiElem = CreateElement('<div style=\"outline: 2px dashed rgba(0,255,0,1); position: absolute; z-index: 9999999;\" class=\"SL_SelRect\"></div>');\n\t\tthis.dims   = new Rect(top, left, top, left);\n\t\tdocument.body.insertBefore(this.uiElem, document.body.firstElementChild);\n\t}\n\n\tsetBottomRight(bottom, right) {\n\t\tlet dr = (new DocRect(document))\n\t\t\t.expand(-2, -2);\n\t\t/* Based on current fixed style */\n\t\tthis.dims\n\t\t\t.setBottomRight(bottom, right)\n\t\t\t.clipTo(dr);\n\n\t\t[ this.uiElem.style.top, this.uiElem.style.left ]     = [ this.dims.top + 'px', this.dims.left + 'px' ];\n\t\t[ this.uiElem.style.height, this.uiElem.style.width ] = [ this.dims.height + 'px', this.dims.width + 'px' ];\n\n\t\tthis.uiElem.style.display = this.IsLargeEnoughToActivate()\n\t\t\t? ''\n\t\t\t: 'none';\n\t}\n\n\tremove() {\n\t\tthis.uiElem.remove();\n\t\tdelete this.uiElem;\n\t}\n\n\tIsLargeEnoughToActivate() {\n\t\treturn this.dims.width > data.selection.activate.minX && this.dims.height > data.selection.activate.minY;\n\t}\n}\n\nnew (class EventHandler {\n\tconstructor() {\n\t\tthis.RegisterActivationEvents();\n\t\tthis._onMouseUp          = this.onMouseUp.bind(this);\n\t\tthis._onMouseMove        = this.onMouseMove.bind(this);\n\t\tthis._onContextMenu      = this.onContextMenu.bind(this);\n\t\tthis.StopNextContextMenu = false;\n\t}\n\n\tRegisterActivationEvents() {\n\t\twindow.addEventListener('mousedown', this.onMouseDown.bind(this), true);\n\t}\n\n\tonMouseDown(e) {\n\t\t/* Static use of no-modifiers down and right mouse button down */\n\t\te.mods = (e.ctrlKey) + (e.altKey << 1) + (e.shiftKey << 2);\n\n\t\tif(e.buttons == RMB && e.mods == 0) {\n\t\t\tthis.CurrentSelection = new SelectionRect(e.pageY, e.pageX);\n\t\t\tthis.LastMouseEvent   = e;\n\t\t\twindow.addEventListener('mouseup', this._onMouseUp, true);\n\t\t\twindow.addEventListener('mousemove', this._onMouseMove, true);\n\t\t\twindow.addEventListener('contextmenu', this._onContextMenu, true);\n\t\t\tthis.mmTimer          = setInterval(this.onMouseMoveInterval.bind(this), 30);\n\t\t\tthis.EligibleElements = {};\n\t\t}\n\t}\n\n\tonMouseMove(e) {\n\t\tthis.LastMouseEvent = e;\n\t}\n\n\tonMouseMoveInterval() {\n\t\tlet e       = this.LastMouseEvent,\n\t\t\tdocElem = document.documentElement;\n\n\t\tif(e) {\n\t\t\tthis.IntervalScrollOffset = {\n\t\t\t\tx: e.clientX < 0\n\t\t\t\t\t? e.clientX\n\t\t\t\t\t: e.clientX > docElem.clientWidth\n\t\t\t\t\t   ? e.clientX - docElem.clientWidth\n\t\t\t\t\t   : 0,\n\t\t\t\ty: e.clientY < 0\n\t\t\t\t\t? e.clientY\n\t\t\t\t\t: e.clientY > docElem.clientHeight\n\t\t\t\t\t   ? e.clientY - docElem.clientHeight\n\t\t\t\t\t   : 0,\n\t\t\t};\n\n\t\t\tthis.MousePos = { clientX: e.clientX, clientY: e.clientY };\n\t\t\tdelete this.LastMouseEvent;\n\t\t}\n\n\t\tdocElem.scrollLeft += this.IntervalScrollOffset.x;\n\t\tdocElem.scrollTop += this.IntervalScrollOffset.y;\n\n\t\t/* Set our bottom right to scroll + max(clientX/Y, clientWidth/Height) */\n\t\tthis.CurrentSelection.setBottomRight(docElem.scrollTop + Math.min(this.MousePos.clientY, docElem.clientHeight),\n\t\t\tdocElem.scrollLeft + Math.min(this.MousePos.clientX, docElem.clientWidth));\n\t}\n\n\tonMouseUp(e) {\n\t\twindow.removeEventListener('mouseup', this._onMouseUp, true);\n\n\t\tclearInterval(this.mmTimer);\n\t\tdelete this.mmTimer;\n\n\t\twindow.removeEventListener('mousemove', this._onMouseMove, true);\n\t\tthis.StopNextContextMenu = this.CurrentSelection.IsLargeEnoughToActivate();\n\t\tthis.CurrentSelection.remove();\n\t\tdelete this.CurrentSelection;\n\t}\n\n\tonContextMenu(e) {\n\t\twindow.removeEventListener('oncontextmenu', this._onContextMenu, true);\n\t\tif(this.StopNextContextMenu) {\n\t\t\tthis.StopNextContextMenu = false;\n\t\t\te.preventDefault();\n\t\t}\n\t}\n});\n"]}