{"version":3,"sources":["SnapLinks.es6"],"names":[],"mappings":"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","file":"SnapLinks-compiled.js","sourcesContent":["/*\r\n * Copyright (c) 2016 Clint Priest\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"),\r\n * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,\r\n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE\r\n * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF\r\n * CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\r\n * DEALINGS IN THE SOFTWARE.\r\n */\r\n\r\n\"use strict\";\r\n\r\nclass Rect {\r\n\tconstructor(top, left, bottom, right) {\r\n\t\t[ this.originTop, this.originLeft ]              = [ top, left ];\r\n\t\t[ this.top, this.left, this.bottom, this.right ] = [ top, left, bottom, right ];\r\n\t\tthis.calculateProperties();\r\n\t}\r\n\r\n\tsetBottomRight(bottom, right) {\r\n\t\t[ this.top, this.left ]     = [ Math.min(this.originTop, bottom), Math.min(this.originLeft, right) ];\r\n\t\t[ this.bottom, this.right ] = [ Math.max(this.originTop, bottom), Math.max(this.originLeft, right) ];\r\n\t\treturn this.calculateProperties();\r\n\t}\r\n\r\n\tcalculateProperties() {\r\n\t\tthis.width  = this.right - this.left;\r\n\t\tthis.height = this.bottom - this.top;\r\n\t\treturn this;\r\n\t}\r\n\r\n\texpand(x, y) {\r\n\t\t[ this.top, this.bottom ] = [ this.top - y, this.bottom + y ];\r\n\t\t[ this.left, this.right ] = [ this.left - x, this.right + x ];\r\n\t\treturn this.calculateProperties();\r\n\t}\r\n\r\n\tintersects(r) {\r\n\t\t/* Some/most of this code is duplicated from other parts of this class for performance reasons */\r\n\r\n\t\t// If the greatest top is higher than the lowest bottom, they don't intersect\r\n\t\tlet GreatestTop  = Math.max(this.top, r.top),\r\n\t\t\tLowestBottom = Math.min(this.bottom, r.bottom);\r\n\t\tif(GreatestTop > LowestBottom)\r\n\t\t\treturn false;\r\n\r\n\t\t// If the greatest left is higher than the lowest right, they don't intersect\r\n\t\tlet GreatestLeft = Math.max(this.left, r.left),\r\n\t\t\tLowestRight  = Math.min(this.right, r.right);\r\n\t\treturn GreatestLeft <= LowestRight;\r\n\t}\r\n\r\n\tclipTo(r) {\r\n\t\t[ this.top, this.left ]     = [ Math.max(this.top, r.top), Math.max(this.left, r.left) ];\r\n\t\t[ this.bottom, this.right ] = [ Math.min(this.bottom, r.bottom), Math.min(this.right, r.right) ];\r\n\t\treturn this.calculateProperties();\r\n\t}\r\n\r\n\ttoString() { return `{ top: ${this.top}, left: ${this.left}, bottom: ${this.bottom}, right: ${this.right}, width: ${this.width}, height: ${this.height} }`; }\r\n}\r\n\r\nclass DocRect extends Rect {\r\n\tconstructor(doc) {\r\n\t\tlet docElem = document.documentElement;\r\n\t\tsuper(0, 0, docElem.scrollHeight, docElem.scrollWidth);\r\n\t}\r\n}\r\n\r\nclass SelectionRect {\r\n\tconstructor(top, left) {\r\n\t\tthis.uiElem = CreateElement('<div style=\"outline: 2px dashed rgba(0,255,0,1); position: absolute; z-index: 9999999;\" class=\"SL_SelRect\"></div>');\r\n\t\tthis.dims   = new Rect(top, left, top, left);\r\n\t\tdocument.body.insertBefore(this.uiElem, document.body.firstElementChild);\r\n\t}\r\n\r\n\tsetBottomRight(bottom, right) {\r\n\t\tlet dr = (new DocRect(document))\r\n\t\t\t.expand(-2, -2);\r\n\t\t/* Based on current fixed style */\r\n\t\tthis.dims\r\n\t\t\t.setBottomRight(bottom, right)\r\n\t\t\t.clipTo(dr);\r\n\r\n\t\t[ this.uiElem.style.top, this.uiElem.style.left ]     = [ this.dims.top + 'px', this.dims.left + 'px' ];\r\n\t\t[ this.uiElem.style.height, this.uiElem.style.width ] = [ this.dims.height + 'px', this.dims.width + 'px' ];\r\n\r\n\t\tthis.uiElem.style.display = this.IsLargeEnoughToActivate()\r\n\t\t\t? ''\r\n\t\t\t: 'none';\r\n\t}\r\n\r\n\tremove() {\r\n\t\tthis.uiElem.remove();\r\n\t\tdelete this.uiElem;\r\n\t}\r\n\r\n\tIsLargeEnoughToActivate() {\r\n\t\treturn this.dims.width > data.selection.activate.minX && this.dims.height > data.selection.activate.minY;\r\n\t}\r\n}\r\n\r\nnew (class EventHandler {\r\n\tconstructor() {\r\n\t\tthis.RegisterActivationEvents();\r\n\t\tthis._onMouseUp          = this.onMouseUp.bind(this);\r\n\t\tthis._onMouseMove        = this.onMouseMove.bind(this);\r\n\t\tthis._onContextMenu      = this.onContextMenu.bind(this);\r\n\t}\r\n\r\n\tRegisterActivationEvents() {\r\n\t\twindow.addEventListener('mousedown', this.onMouseDown.bind(this), true);\r\n\t}\r\n\r\n\tonMouseDown(e) {\r\n\t\t/* Static use of no-modifiers down and right mouse button down */\r\n\t\te.mods = (e.ctrlKey) + (e.altKey << 1) + (e.shiftKey << 2);\r\n\r\n\t\tif(e.buttons == RMB) {\r\n\t\t\tswitch(e.mods) {\r\n\t\t\t\t// @Development\r\n\t\t\t\tcase CTRL + ALT:\r\n\t\t\t\t\tthis.StopNextContextMenu();\r\n\t\t\t\t\tchrome.runtime.sendMessage({ Action: RELOAD_EXTENSION });\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase NONE:\r\n\t\t\t\t\tthis.CurrentSelection = new SelectionRect(e.pageY, e.pageX);\r\n\t\t\t\t\tthis.LastMouseEvent   = e;\r\n\t\t\t\t\tdocument.documentElement.setCapture(true);\r\n\t\t\t\t\twindow.addEventListener('mouseup', this._onMouseUp, true);\r\n\t\t\t\t\twindow.addEventListener('mousemove', this._onMouseMove, true);\r\n\t\t\t\t\tthis.mmTimer = setInterval(this.onMouseMoveInterval.bind(this), 30);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMove(e) {\r\n\t\tthis.LastMouseEvent = e;\r\n\t}\r\n\r\n\tonMouseMoveInterval() {\r\n\t\tlet e       = this.LastMouseEvent,\r\n\t\t\tdocElem = document.documentElement;\r\n\r\n\t\tif(e) {\r\n\t\t\tthis.IntervalScrollOffset = {\r\n\t\t\t\tx: e.clientX < 0\r\n\t\t\t\t\t? e.clientX\r\n\t\t\t\t\t: e.clientX > docElem.clientWidth\r\n\t\t\t\t\t   ? e.clientX - docElem.clientWidth\r\n\t\t\t\t\t   : 0,\r\n\t\t\t\ty: e.clientY < 0\r\n\t\t\t\t\t? e.clientY\r\n\t\t\t\t\t: e.clientY > docElem.clientHeight\r\n\t\t\t\t\t   ? e.clientY - docElem.clientHeight\r\n\t\t\t\t\t   : 0,\r\n\t\t\t};\r\n\r\n\t\t\tthis.MousePos = { clientX: e.clientX, clientY: e.clientY };\r\n\t\t\tdelete this.LastMouseEvent;\r\n\t\t}\r\n\r\n\t\tdocElem.scrollLeft += this.IntervalScrollOffset.x;\r\n\t\tdocElem.scrollTop += this.IntervalScrollOffset.y;\r\n\r\n\t\t/* Set our bottom right to scroll + max(clientX/Y, clientWidth/Height) */\r\n\t\tthis.CurrentSelection.setBottomRight(docElem.scrollTop + Math.min(this.MousePos.clientY, docElem.clientHeight),\r\n\t\t\tdocElem.scrollLeft + Math.min(this.MousePos.clientX, docElem.clientWidth));\r\n\r\n\t\tif(this.ElementIndexer) {\r\n\t\t\tthis.ElementHighlighter.Highlight(\r\n\t\t\t\tthis.SelectedElements = this.ElementIndexer.Search(this.CurrentSelection.dims)\r\n\t\t\t);\r\n\t\t} else if(this.CurrentSelection.IsLargeEnoughToActivate()) {\r\n\t\t\tthis.ElementIndexer     = new ElementIndexer();\r\n\t\t\tthis.ElementHighlighter = new ElementHighlighter();\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseUp(e) {\r\n\t\twindow.removeEventListener('mouseup', this._onMouseUp, true);\r\n\r\n\t\tclearInterval(this.mmTimer);\r\n\t\tdelete this.mmTimer;\r\n\r\n\t\twindow.removeEventListener('mousemove', this._onMouseMove, true);\r\n\t\tthis.CurrentSelection.IsLargeEnoughToActivate() && this.StopNextContextMenu();\r\n\t\tthis.CurrentSelection.remove();\r\n\t\tdelete this.CurrentSelection;\r\n\t\tdelete this.ElementIndexer;\r\n\r\n\t\tthis.ActUpon(this.SelectedElements, e);\r\n\t\tdelete this.SelectedElements;\r\n\r\n\t\tthis.ElementHighlighter.Unhighlight();\r\n\t\tdelete this.ElementHighlighter;\r\n\r\n\t\tdocument.releaseCapture();\r\n\t}\r\n\r\n\tStopNextContextMenu() {\r\n\t\twindow.addEventListener('contextmenu', this._onContextMenu, true);\r\n\t}\r\n\r\n\tonContextMenu(e) {\r\n\t\twindow.removeEventListener('oncontextmenu', this._onContextMenu, true);\r\n\t\te.preventDefault();\r\n\t}\r\n\r\n\tActUpon(tElems) {\r\n\t\t// For now we are simply going to create new tabs for the selected elements\r\n\t\tchrome.runtime.sendMessage({\r\n\t\t\tAction: OPEN_URLS_IN_TABS,\r\n\t\t\ttUrls: \ttElems.map((elem) => elem.href),\r\n\t\t});\r\n\t}\r\n});\r\n"]}